空间分析
=========


--------------------------------------------------------------------------------

## 课程简介

1. 为什么要学习空间分析?
    * 是一门广泛存在于各个行业、领域的科学
    * 有助于对事物发展规律的透彻把握
    * 提升 GIS 理论性的一个十分重要的突破口。

2. 前置课程
    * 地理信息系统
    * 程序设计
    * 地图学、空间数据库等

3. 学习内容
    * 空间分析理论 : 介绍空间分析的一些理论问题,如空间关系理论、空间认知理论、空间推理理论,以及其它理论。
    * 空间分析方法 : 介绍空间分析的各种具体方法,如栅格数据的空间分析方法、矢量数据的空间分析方法、三维数据的空间分析方法、空间数据统计分析方法等。
    * 空间分析建模 : 介绍空间分析的过程建模、应用建模。

4. 课程安排
![][sa-sbus]

5. 课程要求
    * 课程内容:理解为主、重视课后作业和实践
    * 课堂作业:充分重视、认真对待
    * 课堂纪律:珍惜机会、尊重你我他

6. 考核形式
    * 平时成绩( 30% ):考勤 \ 作业 \ 实习
    * 期末考试( 70% ):闭卷考试

7. 参考资料
    * [美国国家地理信息与分析中心(美国加利福尼亚州立大学圣芭芭拉分校), Michael F. Goodchild][ref-ucsb]
    * [School of Geographical Sciences & Urban Planning, Arizona State University, Luc Anselin][ref-asu]
    * [Department of Geography, University of Cambridge, 英国剑桥大学地理系][ref-geog-cam]
    * [School of economic, political and policy sciences, The University of Texas at Dallas][ref-utdallas]

8. 答疑地点及方式
    * 办公室 5-401
    * Email:
    * QQ 群

[sa-sbus]: src/sa/sa-sbus.png
[ref-ucsb]: http://www.ncgia.ucsb.edu/
[ref-asu]: http://geoplan.asu.edu/
[ref-geog-cam]: http://www.geog.cam.ac.uk/people/haining/
[ref-utdallas]: http://www.utdallas.edu/~dag054000/




--------------------------------------------------------------------------------

### 第一章 绪论

###### 重点内容: 空间分析概念、空间目标、空间分析的研究内容



1. 空间分析的概念
    * what is it?
        * 是基于地理对象的位置和形态特征的空间数据分析技术,其目的在于提取和传输空间信息( 郭仁忠 , 1997) 。
        * 是对数据的空间信息、属性信息或者二者共同信息的统计描述或说明 (Goodchild, 1987) 。
        * 是基于地理对象布局的地理数据分析技术 (Hainning, 1990) 。
        * 是对于地理空间现象的定量研究,其常规能力是操纵空间数据使之成为不同的形式,并且提取其潜在的信息 (Baily, 1995; Openshaw, 1997) 。
        * 是从一个或多个空间数据图层获取信息的过程。空间分析是集空间数据分析和空间模拟于一体的技术,通过地理计算和空间表达挖掘潜在空间信息,以解决实际问题 ( 刘湘南等
    * 关于空间分析的称谓很多,如:
        * 地理信息分析
        * 地理空间分析
        * 地理信息统计分析
        * 地理分析
        * 空间数据分析
        * 空间统计学
        * 空间统计与建模
        * 地统计学
    * 什么是空间分析研究的对象?
        * **空间目标**: 具有空间位置、分布、形态、空间关系 ( 距离、方位、拓扑、相关场 ) 等基本特征
        * 不同类型的空间目标具有不同的形态结构描述,对形态结构的分析称为**形态分析**。
        * 空间分析研究的目标?
            * 建立有效的空间数据模型来表达地理实体的时空特性,发展面向应用的时空分析模拟方法,以数字方式动态地、全局地描述地理实体和地理现象的空间分布关系,从而反映地理实体的内 在规律和变化趋势, GIS 空间分析是对 GIS 空间数据的一种增值操作。



2. 空间分析的研究内容
    * 空间分析的内容可以分为三类:
        * 基于图形的分析:包括空间数据的量算或几何操作,如 长度、面积、形状的量测,空间中心/重心的计算,叠加分析、缓冲区分析等;
        * 空间数据统计分析:如空间点模式分析、空间格 ( lattice )数据分析和地统计学;
        * 空间模型与建模:如空间回归模型、地理加权回归、 地理模拟与计算模型(如元胞自动机、多智能体、神经网络)等。
    * 空间分析的研究内容是 GIS 领域理论性、技术性和应用性都很强的分支:
        * 空间分析的**理论**研究: 空间关系理论、空间认知理论、空间推理理论、空间数据的不确定性分析理论等
        * 空间分析的**方法**研究: 矢量数据的空间分析方法、栅格数据的空间分析方法、三维数据的空间分析方法、属性数据的空间统计方法
        * 空间分析**建模与应用**研究: 研究空间分析的建模过程与方法。其广泛适用于卫生健康领域、水利领域、城市管理、地质灾害、地震灾害、交通领域、电力领域、环保领域、气候变化领域等。

3. 空间分析的研究进展
    * 典型例子:基于空间分析的霍乱病患者发病原因分析
    * 空间分析的研究脉络
        * 20 世纪 60 年代: 主要集中在对空间数据的分析和空间自相关的测度上
        * 1970s~1980s :空间统计学高速发展时期
        * 1990s 以后:空间分析的发展和 GIS 的发展密切结合在一起。
    * 空间分析关键技术的变化
        * 地理信息系统和遥感等新技术保证了空间数据的丰富环境,新的处理空间问题的分析模型和方法不断提出。
        * 探索性空间分析技术、可视化技术、空间数据挖掘技术、基于人工智能的空间分析技术等面向海量的空间数据分析方法受到重视,在最近几年得到深入发展。
        * 大规模空间分析问题中的不精确性和不确定性
        * 大数据问题对空间分析造成的影响
        * ![][sa-big-data]

4. 空间分析与 GIS
    * 空间分析是 GIS 的核心
        * ![][sa-core-of-gis]
    * 空间分析功能与 GIS 其他功能的关系
        * ![][sa-gis-other-fun-relation]
    * 是提升 GIS 作为一门独立学科重要突破口
        * GIS = Geographic Information System
        * GIS = Geographic Information Science
        * GIS = Geographic Information Service
        * GIS = Geographic Information Service + Internet = New Service / Web Service

5. 空间分析与应用模型
    * 应用模型是空间分析不可或缺的一部分
        * GIS 可以输入、存储、操作、管理空间数据,并以图形等直观形式表达输出结果,但它本身缺少强大的空间分析能力。空间模型对空间数据进行精确地模型运算,但其结果常常需要通过 GIS 来表达。 GIS 和空间分析模型在功能上的互补是 GIS 与空间模型结合的主要动力。
    * 应用模型和空间分析应该区分开来
        * 地学研究中往往涉及很复杂的分析过程,这些过程尚不能完全用数学和算法来描述 , 所以 GIS 应用模型时常采用定量和定性相结合的形式。
        * 对于专业模型来说,由于 GIS 应用领域的不同,不可 能建立通用的、包罗一切的专业模型,专业模型只能通过用户自己创建。


[sa-big-data]: src/sa/sa-big-data.png
[sa-core-of-gis]: src/sa/sa-core-of-gis.png
[sa-gis-other-fun-relation]: src/sa/sa-gis-other-fun-relation.png



--------------------------------------------------------------------------------

### 第二章 空间分析的基本理论

###### 重点内容: 拓扑关系、度量关系、顺序关系

1. 空间关系理论
    * 空间关系简介
        * 空间关系是 GIS 的重要理论问题之一,在空间数据建模、空间查询、空间分析、空间推理、制图综合、地图理解等过程中都起着重要作用。
            * 可以由空间现象的**几何特性**引起,如距离、方位、连通性、相似性等
            * 可以由空间现象的**几何特性和非几何特性共同引起**,如空间分布现象的统计相关、空间自相关、空间相互作用、空间依 赖等
            * 可以完全由空间现象的**非几何属性**导出空间关系
        * 空间关系之间的约束强度: 度量关系 > 顺序关系 > 拓扑关系
            * 拓扑空间关系是指拓扑变换下的拓扑不变量,如空间目标的相邻和连通关系, 橡皮几何学
            * 方向关系是最基本的顺序关系,又称为方位关系、延伸关系,是指源目标相对于参考目标的顺序关系。
            * 度量关系
                * 定量化描述: 利用距离公式量测两个空间目标间的度量关系。定量度量空间关系分析包括空间指标量算和距离度量两大类
                * 定性度量量测
        * 为什么要研究空间关系的描述方法?
            * 以数学或逻辑的方法区分不同的空间关系,对空间关系给出**形式化的描述**。有助于**澄清**不同用户关于空间关系的语义,为构造空间查询语言和空间分析提供形式化工具。
            * 空间分析建立在空间目标位置和属性表达以及目标间复杂空间关系表达的基础上 , 若**要提高空间分析能力** , 必须解决空间关系描述与表达。
        * 如何评价空间关系描述模型?
            * 一般从完备性、严密性、唯一性、通用性准则等方面进行评估。
            * 完备性是指空间关系描述结果能包含目标间所有可能的定性关系;
            * 严密性是要求所推出的一组关系是实际存在或正确的;
            * 唯一性要求所有关系是互斥的;
            * 通用性指描述方法应能处理各种形状的目标和各类关系。
    * 拓扑空间关系
        * 意义
            * 清楚地反映实体之间的逻辑结构关系
            * 有助于空间要素的查询,利用拓扑关系可以解决许多实际问题。
            * 根据拓扑关系可重建地理实体。
        * 常见的拓扑关系描述方法
            * 4 元组模型
                * 边界点和内部点
                * ![][sa-topo-4]
                * 2^4 = 16, but in fact
                    * 2 种点 / 点拓扑关系
                    * 3 种点 / 线拓扑关系
                    * 3 种点 / 面拓扑关系
                    * 16 种线 / 线拓扑关系
                    * 13 种线 / 面拓扑关系
                    * 8 种面 / 面拓扑关系
            * 9 元组模型
                * 边界、内部和外部
                * ![][sa-topo-9]
                * 引入了“补”的概念,矩阵模型可区分 512 种关系,但具有实际意义的只有一小部分
                    * 2 种点点间关系、 3 种点线间关系、 3 种点面间关系、
                    * 33 种线线间关系、 19 种线面间关系、
                    * 8 种面面间关系。
            * V9I 模型
                * 用空间目标的 Voronoi 区域 (Voronoi region) 作为其外部,对原 9 元组模型进行改进,建立了一种基于 Voronoi 的新 9 元组模型,简称为 V9I 模型。
                * ![][sa-topo-v9i]
            * 顺序空间关系
    * 度量空间关系
        * 顺序空间关系 (相对方向, 绝对方向)
        * 定性描述模型主要包括:
            * 锥形模型
            * 最小约束矩形模型 (MBR)
            * 二维字符串模型 (2-D String)
            * 方向关系矩阵模型, 3x3: 2^9 combinations. 用源目标在某一方向片区的面积比例代替交集。
            * 基于 Voronoi 图的方向关系模型
        * 度量空间关系:空间指标量算、距离度量
            * Plane Distance
                * Euclidean
                * Manhattan
                * ChebyShev, 3x3, d(i, j) == 1, except when i == j == 2
            * Surface Distance
                * 大地测量距离
                * Revised 曼哈顿距离:纬度差加上经度差
                * 旅游时间距离
                * 词典编纂距离
            * 曲线与曲线间的距离可以通过最小距离、平均距离、 Hausdorff 距离和 Frechét 距离等方式计算等
    * 时空空间关系: 时空拓扑关系 (spatio-temporal topology)
        * ![][sa-topo-time-allen]

2. 地理空间认知
    * 地理空间认知概述
        * Geospatial Cognition
            * 地理空间认知是指在日常生活中,人类如何逐步**理解地理空间**,进行地理**分析**和**决策**,包括地理信息的知觉、编码、存储、记忆和解码等一系列心理过程。
        * 地理空间认知过程
            * 经过**地理感知**、**表象再现**、**地理记忆**和**地理思维**四个过程,借助**图像**或者**地图**(心像地图和认知制图)来实现的。
        * 1995 年美国国家地理信息与分析中心 (NCGIA) 发表了“ Advancing Geographic Information Science” 的报告,提出地理信息科学的三大战略领域:
            * 地理空间认知模型
            * 地理概念计算方法
            * 地理信息与社会研究
        * 研究内容
            * 事物在地理空间中的位置(**Where**)和地理事物本身性质(**What**)。地理空间认知是认知科学与地理科学的交叉学科。
            * 主要包括: 地理知觉、地理表象、地理概念化、地理知识的心理表征和地理空间推理,涉及地理知识的获取、存储和使用。
    * 地理知觉
        * 知觉是对感觉信息的组织和解释,即获得感觉信息意义的过程
        * 地理知觉是指将地理事物从地理空间中区分出来,获取其位置信息并对其进行识别
        * 格式塔心理学 (Gestalt Psychology), 又称为完形心理学
            * ![][sa-gestalt-a]
            * ![][sa-gestalt-b]
            * 揭示了知觉的相对性、整体性、恒常性和组织性等基本特征,并总结了称之为组织律的系列知觉组织原则,包括
                * 图形—背景原则
                * [接近原则][sa-gestalt-near]
                * 连续原则
                * [相似性原则][sa-gestalt-similar]
                * [闭合和完整倾向原则][sa-gestalt-full]
                * 共向性原则
                * 简单原则等。
            * 透镜模型
            * 供给模型
        * 对象和位置系统的分离
        * Marr 的草图模型
            * 关于地理知觉过程和步骤影响最大的理论,对知觉过程和步骤的进一步研究大都在 Marr 的基础上进行
            * Marr 认为:视觉信息处理是依靠 3 级结构“要素图 -2.5 维图 - 三维模型表象”来加以处理的。表达外部信息的基本要素是点、边缘、面等。
        * 知觉方式对地理空间尺度划分的意义
            * 知觉方式的不同是空间尺度划分的主要依据
            * 心理学根据不同尺度空间知觉方式的不同,将空间划分为:图形、街景、环境和地理空间。
        * 环境空间与地理空间的知觉方法差异
            * 环境空间的知觉主要靠导航经验;
            * 地理空间的知觉主要靠读图;
    * 地理表象
        * 地理表象用来表示在地理意向性理论指导下的地理形象思维所产生的各种“象”,它既是地理思维活动的产物, 又是地理思维得以进行的载体,与地理知识的使用和地理空间的推理密切相关。
        * 类命题理论(可用于拓扑关系的描述) 和准图片理论(可用于地理模拟)
        * 地理表象分为四类:
            * 地理区域
            * 综合体
            * 地理景观
            * 区域地理系统
    * 地理概念化
        * 概念化方法:
            * 经典集合论 (广泛用于 GIS 语义表达和共享,其特点包括:分类是任意的;类型具有定义属性或关键属性;集合的内涵决定其外延。)
            * 原型分类(原始分类)
                * 更符合日常人的认知分类
                * 特点包括:
                    * 分类不是任意的;
                    * 基础层次类型各个成员享有更多相似的知觉和功能特征;
                    * 类型具有一种内在的渐变结构,基于核心成员 - 原型而构建, 类型不具有关键属性,事物类型的归属通过其与原型的相似 程度来判定;
                    * 在原型分类下,类型集合的边界是模糊的,为模糊集
        * 概念化理论
            * 地理概念存储方式理论(图式理论)
            * 概念形成因素理论(初级理论,次级理论)
        * 地理本体
            * 本体是对世界本质的研究。
            * 地理实体本体主要处理地理实体类型的本质和内涵。地理信息科学中的本体兼具哲学本体和信息本体的双重含义。
            * 地理本体是面向地理领域的概念模型,它包含领域内通用的、普遍的概念,并且规定了领域级别上的约束,这些约束可以被用来进行知识级别上的推理。
            * 地理本体表达的是更高级别的信息需求
            * 地理本体的研究可以为以下几个主要方面提供重要的理论与方法支撑 :
                * 语义互联网
                * 地理信息系统之间的语义互操作
                * 知识级地理信息共享与知识重用
                * 地球科学中语义建模
    * 地理知识心理表征
        * 地理知识编码: Kosslyn 认为记忆中心理表征与视觉表征类似,所以地理知识的心理编码方法主要包括:表象理论、概念命题理论和双重编码理论。
            * **表象理论**的核心内容是图片的隐喻,环境的视觉信息经过大脑加工,以图解的形式进行简化和有序编码与存储,并存在一定的扭曲
            * **概念命题理论**认为所有视觉信息和语言信息都以概念命题的形式进行存储,其强调视觉信息被输入后,必须处理为概念命题的形式才能进行存储。
            * **双重编码理论**认为表象和命题形式的编码共存,其相互分离,并行运转,同时又互相联系。

3. 地理空间推理
    * 地理空间推理概述
        * 空间推理是指利用空间理论和人工智能技术对空间对象进行建模、描述和表示,并据此对空间对象间的空间关系进行定性或定量分析和处理。
        * 地理空间推理主要研究地理事物在地理空间中位置的表达和相关推理。
    * 地理空间推理特点
        * 以空间和存在于空间中的空间对象为研究对象。
        * 推理过程中运用人工智能技术和方法。
        * 处理的是一个或几个推理的问题。
        * 基于空间和存在于空间中的空间对象已经被建模的前提下,不能在没有模型的情况下讨论空间推理。
        * 必须能够给出关于空间和存在于空间中的空间对象的定性或定量的推理结果。
        * 必须能够描述空间行为。
        * 空间推理模型把问题分解为几个组成部分时,必须能够描述这些组成部分的相互作用。
        * 空间推理过程中,可能用到空间谓词,空间中确定的点使某些空间谓词为真,而使另一些空间谓词为假。
        * 应该能够处理带有模糊性和不确定性的空间信息。
        * 应该能够添加和处理时间因素,即成为时空推理。
        * 应该具有空间自然语言理解能力。
    * 地理空间推理研究内容
        * 根据空间目标的位置,基于给定的空间关系形式化表示模型,推断空间目标之间的**空间关系**。
        * 根据空间目标之间的已知基本空间关系,推断空间目标之间未知的空间关系。
        * 利用空间推理,从空间数据库中挖掘空间知识,也可以利用事件推理的方法进行空间目标的模糊查询。
        * 基于常识的空间推理研究**时空推理**
        * 定性空间推理

4. 空间数据的不确定性分析
    * 不确定性简述
        * 不确定性是指被测量对象知识缺乏的程度,通常表现为随机性和模糊性。
            * 随机性的特点是可重复观察,在观察之前知道所有可能的结果,**但不知道到底哪一种结果会出现**。
            * “一粒”和“一堆”是有区别的两个概念,它们的区别是渐变的,不是突变的,两者之间并**不存在明确的界限,这种不确定性就是模糊性**。
    * 空间数据的不确定性
        * 在地理数据**采集**和**处理**过程中的地理数据不确定性问题
        * **位置、边界、属性**不确定性问题。
        * **逻辑不一致性**和**数据不完整性**。
        * 空间分析中不确定性的传播规律以及可视化表达方法。
        * 在决策过程中的地理数据不确定性 ,
        * 建立基于不确定性地理数据处理的空间决策支持系统。
        * 与地理数据不确定性有关的标准规范
    * 空间分析方法的不确定性
        * 网络分析的不确定性
        * 统计分析及其不确定性
        * 叠置分析的不确定性
        * 缓冲区分析的不确定性
        * 不确定性的可视化也是 GIS 空间分析的主要研究领域之一。
            * 空间数据质量的可视化采用直观的二维、三维图形或其它灵活的形式表现出数据的质量,可以把抽象的数据质量度量表现出来。
            * 空间矢量数据误差模型的可视化表示
            * 栅格数据 ( 如影像分类 ) 结果不确定性的可视化表示、
            * GIS 分析应用结果中不确定性的可视化等。
    * 不确定性分析的数学基础
        * **概率理论**
            * 主要用于处理由于随机误差而产生的不确定性。在概率论中,不确定性被描述成在给定某些观测值的条件下某一假设成真的条件概率。
        * **证据理论**
            * 证据理论是对传统概率论的一个扩展。
            * 具有处理不确定信息的能力。
            * 作为一种不确定推理方法,证据理论的主要特点是:满足比贝叶斯概率论更弱的条件;具有直接表达“不确定”和“不知道”的能力。
        * **模糊集和粗糙集理论**
        * **云模型**
            * 云由系列云滴组成,具有期望值 Ex 、熵 En 和超熵 He 3 个数字特征。
            * **期望**反映了云滴在论域空间分布的期望;
            * **熵**是定性概念不确定性的度量, 其值越大,概念的不确定性越大;
            * **超熵**反映云滴的离散程度,其值越大,云滴的离散度越大。
            * ![][sa-cloud-model]
        * **分形理论**
            * 在任意小的尺度下,都有复杂的细节,具有精细结构。
            * 自相似性,自相似可以是近似的或者统计意义的。
            * 不规则性,整体和局部都难以使用传统的几何语言描述。
            * 分形的维数大于拓扑的维数。
            * 大多数情况下,分形可以非常简单的方式生成,如迭代。


[sa-topo-4]: src/sa/sa-topo-4.png
[sa-topo-9]: src/sa/sa-topo-9.png
[sa-topo-v9i]: src/sa/sa-topo-v9i.png
[sa-topo-time-allen]: src/sa/sa-topo-time-allen.png
[sa-gestalt-a]: src/sa/sa-gestalt-a.png
[sa-gestalt-b]: src/sa/sa-gestalt-b.png
[sa-gestalt-full]: src/sa/sa-gestalt-full.png
[sa-gestalt-similar]: src/sa/sa-gestalt-similar.png
[sa-gestalt-near]: src/sa/sa-gestalt-near.png
[sa-cloud-model]: src/sa/sa-cloud-model.png




--------------------------------------------------------------------------------

### 第三章 栅格数据空间分析
1 栅格空间数据
2 栅格数据的聚类、聚合分析
3 栅格数据的信息复合分析
4 栅格数据的追踪分析
5 栅格数据的窗口分析
6 栅格数据的量算分析
